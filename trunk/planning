Схема Альдебарана
	[X] 1. Движок - alEngine - класс, объединяющий все подсистемы.
			[X] Настройки
				[X] Настройки подключения к БД (QSettings)
				[X] Прочие (SQL)
			[X] Данные (2)
			[X] Оборудование (3)
			[X] Пользовательский интерфейс (4)	
	[X] 2. Абстракция над базой данных - иерархия классов - приложение
		[X] Сервер БД:  средствами QT.
		[X] Общий класс для работы с таблицами БД.
		[X] Класс для каждой из таблиц
		Описание таблиц:
    			[X] Таблица товаров
				id primary key int8
				parent int8
				isgroup bool
				name varchar 200
				price number(12,2)
				description bytea
				externalCode varchar 15
				picture bytea
			[X] Таблица заказов
				id primary key int8
				num int8
				orderdate date
				ordertime time
				status int4
				id_user int8
				checknum int4
				tablenum int4
			[X] Таблчная часть заказа
				id_order int8
				ln int8
				id_goods int8
				amount number(8,3)
				price  numer(12,2)
				summ   number(15,2)
				id_user int8
			[X] Таблица пользователей
				id primary key int8
				name varchar 30
				role int4
				password varchar 30
				[ ] Шифрование пароля
			[X] Таблица прав пользователя
				id	int8
				id_owner int8
				rule int4
				enabled bool
			[X] Таблица торгового оборудования
				id	int8
				type	varchar 20
				name	varchar 20
				options	bytea
			[X] Таблица клиентов (карты)
				id	varchar 13
				name	varchar 50
				percent number(5,2)
			[-] Таблица заданий торгового оборудования
			[X] Таблица настроек
		[X] Переработать объекты: элемент справочника, документ, не использовать БД для хранения атрибутов
		[-] Обновление таблиц, при смене структуры (скорее всего не надо, лучше скрипты обновления)
		[X] Сортировка по внутреннему представлению
		[X] Импорт таблицы товаров
			[-] Диалог импортера
			[ ] BUG при попытке импорта, когда нет настроек - вылет
		[X] Экспорт отработанных заказов
			[X] Диалог экспортера

	[X] 3. Управление оборудованием - библиотека, трэд
		[X] Библиотеки tradeequip, tradeequip-drv
		[X] Инициализация оборудования
		[X] Очередь задач
		[X] Фискальный регистратор Феликс-РК(02К) или Штрих-Комбо-ФР-К
		[X] Принтер чеков, citizen на яростные запросы не отвечает		
		[X] Драйвер принтера чеков
			[X] Таймаут при отключеннном принтере
			[X] Отрез не всегда
			[X] Артефакты при печати
		[X] Сириус-терминал с системой самообслуживания
			[X] Экспорт товаров
			[X] Импорт заказов
			[X] Экспорт заказов
			[X] Команды: закрыть заказ, выключить, перезагрузить
		[X] Для каждого устройства - диалог настройки
			[X] Citizen CTS-300
			[-] Office Printer
			[-] ShtirhFR
			[X] FelixRK
			[X] Sirius
						
	[X] 4. Главное окно - приложение mainWindow
		[X] Иконки беосные GPL-ные
		[X] Логин и блокировка
			[X] BUG Логин, при отказе - сегфолт
			[X] BUG Логин, при отказе - не выходит
		[ ] Авторизация по картам.
		[X] Виджет обеденный зал - расположеине столиков
			[X] добавление столов в раскладку
			[X] загрузка схемы (рисунка) зала, черная (0,0,0) точка, без черных соседей - столик
				размеры схемы (800-x)X(600-y), (1024-x)X(768-y), (1028-x)X(1024-y), где x,y суммарные размеры остальных 				виджетов главного окна
			[X] кнопки
				сервис, выход, блокировка, что там ещё может понадобиться?? а!! "о программе"
				[ ] О программе
			[X] загрузка "старых" заказов
			[X] BUG при увиличении количества столов - сегфолт 
		[X] Виджет столик - кнопка с номером заказа и суммой
		[X] Сервисное меню: кассовые операции, оборудование, настройки
			[X] Убирать галочки с оборудования по-которому операции проведены успешно
		[X] Диалог настройки
			[X] Общие
				[X] Рабочий стол
				[X] Пути к шаблонам заказа и счёта
				[X] Импорт/экспорт пути и кодировка, возможно формат
			[X] Пользователи
				[X] Редактор прав
				[X] Удаление пользователя
			[X] Редактор справочника товаров
				[X] Описание товара utf-8
			[X] Таблица товаров
				[X] Редактор описания
				[X] BUG переход на уровень вверх в корне - сегфолт
			[X] Оборудование
				[X] Таблица оборудования
				[X] Редактор устройства
				[X] Устройства по-умолчанию
		[X] Диалог оформление заказа - комплексный виджет редактирования заказа:
			[X] Элементы: заголовок, кнопки сохранения, отмены, печать заказа, печать счёта, пробитие на ККМ
			[X] таблица заказа
				редактирование таблицы, кнопки +,-, ввод количества
				[X] BUG вызов калькулятора в пустом заказе - сегфолт
			[X] сохранение заказа
			[X] отмена заказа
			[X] подбор блюд
			[X] закрытие без сохранения
			[X] Печать заказа, счёта
				[X] Столик в заказе
			[X] Пробитие чека
			[X] Проверка запрета редактирования "чужих" строк
		[X] Диалог Калькулятор
		[X] Архив чеков - прототип журнала
			[X] BUG слишком медленно открывается
	[X] 5. Права доступа
		[X] менеджера - полные права
		[X] бармена - ограничения
			[X] запрет редактирования не своих позиций в заказе
			[X] запрет измеения настроек (как следствие - редактирования товаров)
		[X] сервисный пользователь (сервер оборудования и т.п.)
			[X] запрет логина	
	[X] 6. Печатные формы - шаблоны html
						
Далёкие планы:
web-интерфейс, для удалённого просмотра отчетов по отработанным заказам, статистики и т.п. админка, короче
Настройки преобразовать в спраовчник
Пользователей и права доступа сделать редактируемыми, у прототипов визуальных объектов сделать наборы прав
	открытие, сохранение, редактирование
Аппаратно-независимая печать
Использование коллекций объектов, выборок, записей

HINT
	для работы с принтером напрямую пользователю должна быть разрешена запись в /dev/lpX

Концепция ветки 1.х
Переход на wxWidgets.
Абстрактный класс alAbstraction - прародитель всех классов данных. Предопределенные поля id, guid.
	Потомки alCard - картотека, alRecord - запись, alTable - табличное поле для любого наследника alAbstract,
	alCardTable, alRecordTable.
Обвзяки для драйверов БД - генераторы запросов к бд на основе метаданных.
Виджеты БД
	alForm - форма с привязкой к alAbstraction, виджеты с привязкой к alForm или без неё. Возможно использование 
	шаблонов
Описание классов метаданных. Макросы описания, создают процедуры записи/чтения, если не указаны явно, добавляют
в пространство имён объекта.

Структура приложения:
[ ] 0. Движок alEngine.
Функциональное описание: инициализирует подсистемы (графическая среда, журнал, сервис) загружает некий плагин бизнес-приложения, проверяет зависимости, загружает необходимые модули бд, типов данных, интерфейсов и т.д., проверяет соответствие объектной модели БП и структры БД, в случае необходимости предлагает провести реструктуризацию, передаёт управление бизнес-приложению, реализует "общение" между БП и подсистемами
[ ] 1. Графическая подсистема alFrontend
ФО: отвечает за создание диалогов, меню, панелей инструментов и т.д.
[ ] 2. Журнал alLog
ФО: лог программы, подразделяется на системный и "прикладной"
[?] 3. Сервис alService
ФО: настройка соединений, движка, режима работы с бд [5]
[?] 4. Модули БД alData
ФО: обязан предоставить описание своего диалекта SQL или реализовать на уровне методов: создание/изменения объектов (таблиц, полей, индексов, триггеров) бд, выборку из бд практически любой сложности.
[ ] 5. Типы данных
ФО: все типы данных являются строго объектными, умеют сами себя описывать и записывать в бд, в случае хранимости объекта. на основе RTTI строится схема метаданных, формируется структура БД. Два режима работы: через уровень абстракции над БД [4] или непосредственная работа с БД для ускорения (регистры и тп), в этом случае необходима связка с конкретным движком БД - прямые запросы. Возможен интересный вариант, когда часть классов умеет работать напрямую, а часть опосредованно, время покажет
Библиотека базовых классов :
	[!] абстрактный объект - alObject
	[!] число - alNumber
	[!] строка - alString
	[ ] дата и время - alDateTime
	[ ] коллекция - alCollection
	[ ] таблица - alTable (наследуется от коллекции)
	[ ] соответствие - alMap
	[ ] массив - частный случай соответствия
	[ ] подборка документов - представление выборки 	
Библиотека стандартных классов БД
	[!] абстрактный объект БД - alDataObject
	[ ] абстрактная связанная таблица - alDataTable
	[ ] картотека - alCards, карточка - alCard, коллекция таблиц alCardTables, таблица карточки alCardTable
	[ ] документ
	[ ] архив документов
	[?] регистры
[ ] Прототип БП
